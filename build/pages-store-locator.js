"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[540],{31550:(e,t,o)=>{o.r(t),o.d(t,{default:()=>P});var a=o(98778),r=o(36287),l=o(66272),n=o(41375),s=o(8805),i=o(70252),c=o(38340),d=o(89408),m=o(66569),u=o(14893),p=o(12250),g=o.n(p),f=o(79162),y=o(87287),_=o(48593);const v=({storesInfo:e})=>{const t=(0,i.A)();return null==e?void 0:e.map(((e,o)=>a.createElement(m.A,{key:o},a.createElement(r.az,{margin:"10px"},e.name?a.createElement(r.az,{fontSize:"lg"},e.name):"",a.createElement(r.az,{fontSize:"md",color:"gray.600"},e.address1),a.createElement(r.az,{fontSize:"md",color:"gray.600"},e.city,", ",e.stateCode?e.stateCode:""," ",e.postalCode),void 0!==e.distance?a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement(r.az,{fontSize:"md",color:"gray.600"},e.distance," ",e.distanceUnit," ",t.formatMessage({id:"store_locator.description.away",defaultMessage:[{type:0,value:"away"}]}))):"",void 0!==e.phone?a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement(r.az,{fontSize:"md",color:"gray.600"},t.formatMessage({id:"store_locator.description.phone",defaultMessage:[{type:0,value:"Phone:"}]})," ",e.phone)):"",null!=e&&e.storeHours?a.createElement(a.Fragment,null," ",a.createElement(f.J,{color:"blue.700",style:{marginTop:"10px"}},a.createElement(r.az,{fontSize:"lg"},t.formatMessage({id:"store_locator.action.viewMore",defaultMessage:[{type:0,value:"View More"}]})),a.createElement(y.Q,null)),a.createElement(_.v,{mb:6,mt:4},a.createElement("div",{dangerouslySetInnerHTML:{__html:null==e?void 0:e.storeHours}}))," "):""))))};v.propTypes={storesInfo:g().array};const E=v;var M=o(35906),C=o(51803),h=o(64732),S=o(66092),x=o(67370),b=o(48070),z=o(35490),H=o(49785),U=o(32105),w=o(8819);const A=({form:e,submitForm:t})=>{const{searchStoresParams:o,userHasSetManualGeolocation:l,automaticGeolocationHasFailed:n,setUserWantsToShareLocation:s,userWantsToShareLocation:c}=(0,a.useContext)(w.dp),d=(()=>{const{setSearchStoresParams:e,setAutomaticGeolocationHasFailed:t,setUserHasSetManualGeolocation:o,userHasSetManualGeolocation:r}=(0,a.useContext)(w.dp),l=()=>{t(!0)},n=o=>{t(!1),e({latitude:o.coords.latitude,longitude:o.coords.longitude,limit:U.Ur})},s=()=>{var e;null!==(e=navigator)&&void 0!==e&&e.geolocation?(navigator.geolocation.getCurrentPosition(n,l),o(!1)):console.log("Geolocation not supported")};return(0,a.useEffect)((()=>{r||s()}),[]),s})(),{control:m}=e,p=(0,i.A)();return a.createElement("form",{id:"store-locator-form",onSubmit:e.handleSubmit(t)},a.createElement(C.M,null,U.Hi.length>0&&a.createElement(H.xI,{name:"countryCode",control:m,defaultValue:l?null==o?void 0:o.countryCode:"",rules:{required:p.formatMessage({id:"store_locator.error.please_select_a_country",defaultMessage:[{type:0,value:"Please select a country."}]})},render:({field:t})=>0!==U.Hi.length?a.createElement(h.MJ,{isInvalid:e.formState.errors.countryCode},a.createElement(S.l,(0,M.A)({},t,{marginBottom:"10px",placeholder:p.formatMessage({id:"store_locator.action.select_a_country",defaultMessage:[{type:0,value:"Select a country"}]}),borderColor:"gray.500"}),U.Hi.map((({countryCode:e,countryName:t})=>a.createElement("option",{value:e,key:e},p.formatMessage(t))))),e.formState.errors.countryCode&&a.createElement(x.Wt,{sx:{marginBottom:"10px"},color:"red.600"},a.createElement(z._0,{"aria-hidden":"true",mr:2}),e.formState.errors.countryCode.message)):a.createElement(a.Fragment,null)})),a.createElement(C.M,null,a.createElement(H.xI,{name:"postalCode",control:m,rules:{required:p.formatMessage({id:"store_locator.error.please_enter_a_postal_code",defaultMessage:[{type:0,value:"Please enter a postal code."}]})},defaultValue:l?null==o?void 0:o.postalCode:"",render:({field:t})=>a.createElement(h.MJ,{isInvalid:e.formState.errors.postalCode},a.createElement(b.p,(0,M.A)({},t,{placeholder:p.formatMessage({id:"store_locator.field.placeholder.enter_postal_code",defaultMessage:[{type:0,value:"Enter postal code"}]})})),e.formState.errors.postalCode&&a.createElement(x.Wt,{sx:{top:"-20px"},color:"red.600"},a.createElement(z._0,{"aria-hidden":"true",mr:2}),e.formState.errors.postalCode.message))}),a.createElement(u.$,{key:"find-button",type:"submit",onClick:()=>{s(!1)},width:"15%",marginLeft:2,variant:"solid"},p.formatMessage({id:"store_locator.action.find",defaultMessage:[{type:0,value:"Find"}]}))),a.createElement(r.az,{style:{display:"flex",justifyContent:"center",alignItems:"center"},margin:"10px"},p.formatMessage({id:"store_locator.description.or",defaultMessage:[{type:0,value:"Or"}]})),a.createElement(u.$,{key:"use-my-location-button",onClick:()=>{s(!0),d()},width:"100%",variant:"solid",fontWeight:"bold",marginBottom:4},p.formatMessage({id:"store_locator.action.use_my_location",defaultMessage:[{type:0,value:"Use My Location"}]})),a.createElement(h.MJ,{isInvalid:n&&c},a.createElement(x.Wt,{color:"red.600",alignItems:"center",justifyContent:"center",marginBottom:4},a.createElement(z._0,{"aria-hidden":"true",mr:2}),p.formatMessage({id:"store_locator.error.agree_to_share_your_location",defaultMessage:[{type:0,value:"Please agree to share your location"}]}))))};A.propTypes={form:g().object,submitForm:g().func};const L=A;var F=o(73448),T=o(54007);const I=()=>{var e;const{searchStoresParams:t,setSearchStoresParams:o,userHasSetManualGeolocation:l,setUserHasSetManualGeolocation:n}=(0,a.useContext)(w.dp),{countryCode:p,postalCode:g,latitude:f,longitude:y,limit:_}=t,v=(0,i.A)(),M=(0,H.mN)({mode:"onChange",reValidateMode:"onChange",defaultValues:{countryCode:l?p:"",postalCode:l?g:""}}),[C,h]=(0,a.useState)(_),{data:S,isLoading:x,refetch:b,isFetching:z}=(0,T.useSearchStores)({parameters:{countryCode:p,postalCode:g,latitude:f,longitude:y,locale:v.locale,maxDistance:F.Xu,limit:200,distanceUnit:F.U4}}),U=x||z?void 0:(null==S||null===(e=S.data)||void 0===e?void 0:e.slice(0,C))||[],A=(null==S?void 0:S.total)||0,I=function(){var e=(0,s.A)((function*(e){const{postalCode:t,countryCode:a}=e;""!==t&&(""!==a?(o({postalCode:t,countryCode:a,limit:F.Ur}),n(!0)):0===F.Hi.length&&(o({postalCode:t,countryCode:F.GK.countryCode,limit:F.Ur}),n(!0))),h(F.Ur),b()}));return function(t){return e.apply(this,arguments)}}();return a.createElement(a.Fragment,null,a.createElement(c.D,{fontSize:"2xl",style:{marginBottom:"25px"}},v.formatMessage({id:"store_locator.title",defaultMessage:[{type:0,value:"Find a Store"}]})),a.createElement(L,{form:M,submitForm:I}),a.createElement(d.n,{allowMultiple:!0,flex:[1,1,1,5]},a.createElement(m.A,null,a.createElement(r.az,{flex:"1",fontWeight:"semibold",fontSize:"md",style:{display:"flex",justifyContent:"center",alignItems:"center",margin:"20px"}},void 0===U?v.formatMessage({id:"store_locator.description.loading_locations",defaultMessage:[{type:0,value:"Loading locations..."}]}):0===U.length?v.formatMessage({id:"store_locator.description.no_locations",defaultMessage:[{type:0,value:"Sorry, there are no locations in this area"}]}):void 0!==t.postalCode?`${v.formatMessage({id:"store_locator.description.viewing_near_postal_code",defaultMessage:[{type:0,value:"Viewing stores within "},{type:1,value:"distance"},{type:1,value:"distanceUnit"},{type:0,value:" of "},{type:1,value:"postalCode"},{type:0,value:" in"}]},{distance:F.Xu,distanceUnit:F.U4,postalCode:t.postalCode})}\n                ${0!==F.Hi.length?v.formatMessage(F.Hi.find((e=>e.countryCode===t.countryCode)).countryName):v.formatMessage(F.GK.countryName)}`:v.formatMessage({id:"store_locator.description.viewing_near_your_location",defaultMessage:[{type:0,value:"Viewing stores near your location"}]}))),a.createElement(E,{storesInfo:U})),!z&&C<A&&C<200?a.createElement(r.az,{paddingTop:"10px",marginTop:"10px"},a.createElement(u.$,{key:"load-more-button",onClick:()=>{h(C+F.Ur<=200?C+F.Ur:C)},width:"100%",variant:"outline",marginBottom:4},v.formatMessage({id:"store_locator.pagination.load_more",defaultMessage:[{type:0,value:"Load More"}]}))):"")};I.propTypes={};const B=I,G=()=>{const e=(0,w.x)();return a.createElement(w.dp.Provider,{value:e},a.createElement(r.az,{"data-testid":"store-locator-page",bg:"gray.50",py:[8,16]},a.createElement(n.A,{title:"Store Locator",description:"Find a Store"}),a.createElement(l.m,{overflowY:"scroll",paddingTop:8,width:["90%"],bg:"white",paddingBottom:14,marginTop:8,marginBottom:8,borderRadius:"base"},a.createElement(B,null))))};G.getTemplateName=()=>"store-locator",G.propTypes={};const P=G}}]);