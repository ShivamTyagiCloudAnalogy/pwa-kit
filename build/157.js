"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[157],{63157:(e,t,a)=>{a.d(t,{A:()=>N});var r=a(49534),l=a(8805),n=a(98778),o=a(12250),i=a.n(o),d=a(25149),u=a(70252),s=a(20751),c=a(78539),m=a(54019),p=a(38340),f=a(14893),g=a(44940),y=a(45915),v=a(36287),b=a(40133),h=a(82070),E=a(79060),_=a(15221),O=a(75639),w=a(50828),k=a(84939),P=a(23215),M=a(65285),B=a(41663),A=a(34638),S=a(73448),L=a(45063),C=a(90025),T=a(55777),W=a(74941),z=a(93459);function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(Object(a),!0).forEach((function(t){(0,r.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const I=({name:e,currency:t,priceData:a,category:r,product:l,isProductPartOfBundle:o})=>n.createElement(c.T,{mr:4,spacing:2,align:"flex-start",marginBottom:[4,4,4,0,0]},r&&n.createElement(m.E,{isLoaded:r,minWidth:64},n.createElement(w.A,{categories:r})),n.createElement(m.E,{isLoaded:e},n.createElement(p.D,{fontSize:"2xl"},`${e}`)),!o&&n.createElement(n.Fragment,null,n.createElement(m.E,{isLoaded:null==a?void 0:a.currentPrice},(null==a?void 0:a.currentPrice)&&n.createElement(L.A,{priceData:a,currency:t})),n.createElement(m.E,{isLoaded:l},(null==l?void 0:l.productPromotions)&&n.createElement(z.A,{product:l}))));I.propTypes={name:i().string,currency:i().string,category:i().array,priceData:i().object,product:i().object,isProductPartOfBundle:i().bool};const Q=(0,P.A)(f.$),x=(0,n.forwardRef)((({product:e,category:t,showFullLink:a=!1,imageSize:r="md",isWishlistLoading:o=!1,addToCart:i,updateCart:p,addToWishlist:w,updateWishlist:P,isProductLoading:L,isProductPartOfSet:z=!1,isProductPartOfBundle:D=!1,childOfBundleQuantity:x=0,childProductOrderability:N,setChildProductOrderability:q,isBasketLoading:F=!1,onVariantSelected:V=()=>{},validateOrderability:$=(e,t,a)=>!L&&(null==e?void 0:e.orderable)&&t>0&&t<=a,showImageGallery:G=!0,setSelectedBundleQuantity:H=()=>{},selectedBundleParentQuantity:K=1},R)=>{const{currency:U}=(0,E.H2)(),X=(0,A.d)(),Y=(0,u.A)(),J=(0,d.zy)(),{isOpen:Z,onOpen:ee,onClose:te}=(0,_.SM)(),ae=(0,g.D)(),[re,le]=(0,n.useState)(!1),{showLoading:ne,showInventoryMessage:oe,inventoryMessage:ie,quantity:de,minOrderQuantity:ue,setQuantity:se,variant:ce,variationParams:me,variationAttributes:pe,stockLevel:fe,stepQuantity:ge,isOutOfStock:ye,unfulfillable:ve}=(0,E.Ki)(e,z,D),be=(0,n.useMemo)((()=>(0,W.mY)(e,{quantity:de})),[e,de]),he=!L,Ee=null==e?void 0:e.type.set,_e=null==e?void 0:e.type.bundle,Oe=(0,n.useRef)(null),{disableButton:we,customInventoryMessage:ke}=(0,n.useMemo)((()=>{let e=oe,t="";if(!e&&(Ee||_e)&&N){const a=Object.keys(N).find((e=>N[e].showInventoryMessage));if(e=!!a,a){const e=N[a];e.unfulfillable&&(t=Y.formatMessage({defaultMessage:[{type:0,value:"Only "},{type:1,value:"stockLevel"},{type:0,value:" left for "},{type:1,value:"productName"},{type:0,value:"!"}],id:"use_product.message.inventory_remaining_for_product"},{stockLevel:e.stockLevel,productName:e.productName})),e.isOutOfStock&&(t=Y.formatMessage({defaultMessage:[{type:0,value:"Out of stock for "},{type:1,value:"productName"}],id:"use_product.message.out_of_stock_for_product"},{productName:e.productName}))}}return{disableButton:e,customInventoryMessage:t}}),[oe,N]),Pe=(e={})=>{const{scrollErrorIntoView:t=!0}=e,a=$(ce,de,fe),r=!Ee&&!_e&&!a,l=r&&t;return le(r),l&&Oe.current.scrollIntoView({behavior:"smooth",block:"center"}),a},Me=()=>{const t=[],a={update:Y.formatMessage({defaultMessage:[{type:0,value:"Update"}],id:"product_view.button.update"}),addToCart:Y.formatMessage({defaultMessage:[{type:0,value:"Add to Cart"}],id:"product_view.button.add_to_cart"}),addSetToCart:Y.formatMessage({defaultMessage:[{type:0,value:"Add Set to Cart"}],id:"product_view.button.add_set_to_cart"}),addBundleToCart:Y.formatMessage({defaultMessage:[{type:0,value:"Add Bundle to Cart"}],id:"product_view.button.add_bundle_to_cart"}),addToWishlist:Y.formatMessage({defaultMessage:[{type:0,value:"Add to Wishlist"}],id:"product_view.button.add_to_wishlist"}),addSetToWishlist:Y.formatMessage({defaultMessage:[{type:0,value:"Add Set to Wishlist"}],id:"product_view.button.add_set_to_wishlist"}),addBundleToWishlist:Y.formatMessage({defaultMessage:[{type:0,value:"Add Bundle to Wishlist"}],id:"product_view.button.add_bundle_to_wishlist"})},r=function(){var t=(0,l.A)((function*(){if(!Pe())return null;if(!i&&!p)return null;if(p)yield p(ce||e,de);else try{const t=yield i(ce,de);t&&ee({product:e,itemsAdded:t,selectedQuantity:de})}catch(e){X({title:Y.formatMessage(S.gS),status:"error"})}}));return function(){return t.apply(this,arguments)}}(),d=function(){var t=(0,l.A)((function*(){if(!P&&!w)return null;P?P(e,ce,de):w(e,ce,de)}));return function(){return t.apply(this,arguments)}}();return!i&&!p||D||t.push(n.createElement(f.$,{key:"cart-button",onClick:r,isDisabled:we,isLoading:F,width:"100%",variant:"solid",marginBottom:4},p?a.update:Ee?a.addSetToCart:_e?a.addBundleToCart:a.addToCart)),!w&&!P||D||t.push(n.createElement(Q,{key:"wishlist-button",onClick:d,disabled:o||!he,isLoading:o,width:"100%",variant:"outline",marginBottom:4},P?a.update:Ee?a.addSetToWishlist:_e?a.addBundleToWishlist:a.addToWishlist)),t};return"function"==typeof R&&(R=R.bind({validateOrderability:Pe})),D&&de!=K*x&&se(K*x),(0,n.useEffect)((()=>{Z&&te()}),[J.pathname]),(0,n.useEffect)((()=>{Ee||_e||!$(ce,de,fe)||le(!1)}),[me]),(0,n.useEffect)((()=>{ce&&V(e,ce,de)}),[null==ce?void 0:ce.productId,de]),(0,n.useEffect)((()=>{if(D||z){const t=e.itemId??e.id;q((a=>j(j({},a),{},{[t]:{showInventoryMessage:oe,isOutOfStock:ye,unfulfillable:ve,stockLevel:fe,productName:null==e?void 0:e.name}})))}}),[oe,ie]),n.createElement(y.s,{direction:"column","data-testid":"product-view",ref:R},n.createElement(v.az,{display:["block","block","block","none"]},n.createElement(I,{name:null==e?void 0:e.name,product:e,priceData:be,currency:(null==e?void 0:e.currency)||U,category:t,isProductPartOfBundle:D})),n.createElement(y.s,{direction:["column","column","column","row"]},G&&n.createElement(v.az,{flex:1,mr:[0,0,0,6,6]},e?n.createElement(n.Fragment,null,n.createElement(O.A,{size:r,imageGroups:e.imageGroups,selectedVariationAttributes:me,lazy:z||D}),n.createElement(M.qX,null,a&&e&&n.createElement(k.A,{to:`/product/${e.master.masterId}`,color:"blue.600"},n.createElement(s.A,{id:"product_view.link.full_details",defaultMessage:[{type:0,value:"See full details"}]})))):n.createElement(O.E,null)),n.createElement(c.T,{align:"stretch",spacing:8,flex:1},n.createElement(v.az,{display:["none","none","none","block"]},n.createElement(I,{name:null==e?void 0:e.name,product:e,priceData:be,currency:(null==e?void 0:e.currency)||U,category:t,isProductPartOfBundle:D})),n.createElement(c.T,{align:"stretch",spacing:4},D&&n.createElement(v.az,null,n.createElement(b.E,{fontWeight:"medium",fontSize:"md","aria-label":"price"},n.createElement("label",null,Y.formatMessage({defaultMessage:[{type:0,value:"Quantity"}],id:"product_view.label.quantity"}),": ",x))),ne?n.createElement(n.Fragment,null,n.createElement(m.E,{height:6,width:32}),n.createElement(m.E,{height:20,width:64}),n.createElement(m.E,{height:6,width:32}),n.createElement(m.E,{height:20,width:64})):pe.map((({id:e,name:t,selectedValue:a,values:r})=>{const l=r.map((({href:t,name:r,image:l,value:o,orderable:i},d)=>{const u=l?n.createElement(v.az,{height:"100%",width:"100%",minWidth:"32px",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundColor:r.toLowerCase(),backgroundImage:`url(${l.disBaseLink||l.link})`}):r,s=Boolean(null==a?void 0:a.value),c=(null==a?void 0:a.value)===o,m=c||!s&&0===d;return n.createElement(C.A,{key:o,href:t,disabled:!i,value:o,name:r,variant:"color"===e?"circle":"square",selected:c,isFocusable:m},u)}));return n.createElement(T.A,{key:e,value:null==a?void 0:a.value,displayName:(null==a?void 0:a.name)||"",label:Y.formatMessage({defaultMessage:[{type:1,value:"variantType"}],id:"product_view.label.variant_type"},{variantType:t})},l)})),!Ee&&!D&&n.createElement(c.T,{align:"stretch",maxWidth:"200px"},n.createElement(v.az,{fontWeight:"bold"},n.createElement("label",{htmlFor:"quantity"},Y.formatMessage({defaultMessage:[{type:0,value:"Quantity:"}],id:"product_view.label.quantity"}))),n.createElement(B.A,{id:"quantity",step:ge,value:de,min:ue,onChange:(e,t)=>{t>=0?(se(t),_e&&H(t)):""===e&&se(e)},onBlur:e=>{const t=e.target.value;(parseInt(t)<0||""===t)&&(se(ue),_e&&H(ue))},onFocus:e=>{e.target.select()}})),n.createElement(v.az,{ref:Oe},!ne&&re&&n.createElement(h.z,{in:!0},n.createElement(b.E,{color:"orange.600",fontWeight:600,marginBottom:8},Y.formatMessage({id:"lCPCxk",defaultMessage:[{type:0,value:"Please select all your options above"}]})))),n.createElement(M.cD,null,a&&e&&n.createElement(k.A,{to:`/product/${e.master.masterId}`,color:"blue.600"},n.createElement(s.A,{id:"product_view.link.full_details",defaultMessage:[{type:0,value:"See full details"}]}))),Ee&&n.createElement("p",null,null==e?void 0:e.shortDescription)),n.createElement(v.az,null,!ne&&oe&&!ke&&n.createElement(h.z,{in:!0},n.createElement(b.E,{color:"orange.600",fontWeight:600,marginBottom:8},ie)),!ne&&ke&&n.createElement(h.z,{in:!0},n.createElement(b.E,{color:"orange.600",fontWeight:600,marginBottom:8},ke)),n.createElement(v.az,{display:z?"block":["none","none","none","block"]},Me())))),n.createElement(v.az,{position:"fixed",bg:"white",width:"100%",display:z||D?"none":["block","block","block","none"],p:[4,4,6],left:0,bottom:0,zIndex:2,boxShadow:ae.shadows.top},Me()))}));x.displayName="ProductView",x.propTypes={product:i().object,isProductPartOfSet:i().bool,isProductPartOfBundle:i().bool,childOfBundleQuantity:i().number,category:i().array,isProductLoading:i().bool,isBasketLoading:i().bool,isWishlistLoading:i().bool,addToCart:i().func,addToWishlist:i().func,updateCart:i().func,updateWishlist:i().func,showFullLink:i().bool,imageSize:i().oneOf(["sm","md"]),childProductOrderability:i().object,setChildProductOrderability:i().func,onVariantSelected:i().func,validateOrderability:i().func,showImageGallery:i().bool,setSelectedBundleQuantity:i().func,selectedBundleParentQuantity:i().number};const N=x}}]);