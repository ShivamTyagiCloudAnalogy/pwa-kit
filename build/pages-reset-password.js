"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[215],{63560:(e,t,a)=>{a.d(t,{A:()=>b});var r=a(35906),s=a(98778),n=a(12250),l=a.n(n),o=a(49785),i=a(64732),c=a(29241),m=a(51803),d=a(48070),u=a(4829),p=a(66170),g=a(66092),f=a(35218),E=a(67370),h=a(25635),y=a(70252);const _=({name:e,label:t,formLabel:a,type:n="text",options:l=[],rules:_={},error:b,placeholder:w,inputProps:v,control:S,autoComplete:A,defaultValue:x,helpText:C,children:M,inputRef:k})=>{const T=(0,y.A)(),[z,B]=(0,s.useState)(!0),R=z?h.IT:h.$G,j=z?T.formatMessage({id:"field.password.assistive_msg.show_password",defaultMessage:[{type:0,value:"Show password"}]}):T.formatMessage({id:"field.password.assistive_msg.hide_password",defaultMessage:[{type:0,value:"Hide password"}]}),L="password"===n&&z?"password":"password"===n?"text":n;return s.createElement(o.xI,{name:e,control:S,rules:_,defaultValue:x,render:({field:{onChange:o,value:y,ref:_}})=>{const S="function"==typeof v?v({value:y,onChange:o}):v;return s.createElement(i.MJ,{id:e,isInvalid:b},!["checkbox","radio","hidden"].includes(n)&&(a||s.createElement(c.l,null,t)),s.createElement(m.M,null,["text","password","email","phone","tel","number"].includes(n)&&s.createElement(d.p,(0,r.A)({ref:e=>{_(e),k&&(k.current=e)},onChange:o,value:y,type:L,placeholder:w,autoComplete:A},S)),"hidden"===n&&s.createElement("input",(0,r.A)({ref:_,onChange:o,value:y,type:"hidden"},S)),"password"===n&&s.createElement(u.t,null,s.createElement(p.K,{variant:"ghosted","aria-label":j,icon:s.createElement(R,{color:"gray.500",boxSize:6}),onClick:()=>B(!z)})),"select"===n&&s.createElement(g.l,(0,r.A)({ref:_,onChange:o,value:y,placeholder:w},S),l.map((e=>s.createElement("option",{key:`${e.label}-${e.value}`,value:e.value},e.label)))),"checkbox"===n&&s.createElement(f.S,(0,r.A)({ref:_,onChange:e=>o(e.target.checked),isChecked:y},S),a||t),M),b&&"hidden"!==n&&s.createElement(E.Wt,{color:"red.600"},s.createElement(h._0,{"aria-hidden":"true",mr:2}),b.message),C)}})};_.propTypes={name:l().string,label:l().string,autoComplete:l().string,formLabel:l().any,type:l().oneOf(["text","number","password","email","phone","tel","select","checkbox","hidden"]),options:l().arrayOf(l().shape({label:l().string,value:l().any})),rules:l().object,error:l().shape({message:l().string}),placeholder:l().string,inputProps:l().oneOfType([l().object,l().func]),control:l().object,defaultValue:l().any,helpText:l().any,children:l().any,inputRef:l().object};const b=_},34062:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var r=a(8805),s=a(98778),n=a(12250),l=a.n(n),o=a(20751),i=a(36287),c=a(66272),m=a(86400),d=a(40133),u=a(14893),p=a(49785),g=a(54007),f=a(41375),E=a(76315),h=a(25635),y=a(17015),_=a(70252),b=a(63560);const w=({form:e,prefix:t=""})=>{const a=function({form:{control:e,formState:{errors:t}},prefix:a=""}){const{formatMessage:r}=(0,_.A)();return{email:{name:`${a}email`,label:r({defaultMessage:[{type:0,value:"Email"}],id:"use_reset_password_fields.label.email"}),placeholder:"you@email.com",defaultValue:"",type:"email",autoComplete:"email",rules:{required:r({defaultMessage:[{type:0,value:"Please enter a valid email address."}],id:"use_reset_password_fields.error.required_email"})},error:t[`${a}email`],control:e}}}({form:e,prefix:t});return s.createElement(i.az,null,s.createElement(b.A,a.email))};w.propTypes={form:l().object.isRequired,prefix:l().string};const v=w,S=({submitForm:e,clickSignIn:t=y.lQ,form:a})=>{var r;return s.createElement(s.Fragment,null,s.createElement(m.B,{justify:"center",align:"center",spacing:8},s.createElement(h.FQ,{width:"60px",height:"auto"}),s.createElement(m.B,{spacing:2},s.createElement(d.E,{align:"center",fontSize:"xl",fontWeight:"semibold"},s.createElement(o.A,{defaultMessage:[{type:0,value:"Reset Password"}],id:"reset_password_form.title.reset_password"})),s.createElement(d.E,{fontSize:"sm",align:"center",color:"gray.700"},s.createElement(o.A,{defaultMessage:[{type:0,value:"Enter your email to receive instructions on how to reset your password"}],id:"reset_password_form.message.enter_your_email"})))),s.createElement("form",{onSubmit:a.handleSubmit(e),"data-testid":"sf-auth-modal-form"},s.createElement(m.B,{paddingTop:8,spacing:8,paddingLeft:4,paddingRight:4},(null===(r=a.formState.errors)||void 0===r?void 0:r.global)&&s.createElement(E.F,{status:"error"},s.createElement(h._0,{color:"red.500",boxSize:4}),s.createElement(d.E,{fontSize:"sm",ml:3},a.formState.errors.global.message)),s.createElement(v,{form:a}),s.createElement(m.B,{spacing:6},s.createElement(u.$,{type:"submit",onClick:()=>a.clearErrors("global"),isLoading:a.formState.isSubmitting},s.createElement(o.A,{defaultMessage:[{type:0,value:"Reset Password"}],id:"reset_password_form.button.reset_password"})),s.createElement(m.B,{direction:"row",spacing:1,justify:"center"},s.createElement(d.E,{fontSize:"sm"},s.createElement(o.A,{defaultMessage:[{type:0,value:"Or return to"}],id:"reset_password_form.message.return_to_sign_in"})),s.createElement(u.$,{variant:"link",size:"sm",onClick:t},s.createElement(o.A,{defaultMessage:[{type:0,value:"Sign in"}],id:"reset_password_form.action.sign_in"})))))))};S.propTypes={submitForm:l().func,clickSignIn:l().func,form:l().object};const A=S;var x=a(35490),C=a(7711),M=a(65376),k=a(25149);const T=()=>{const e=(0,p.mN)(),t=(0,C.A)(),[a,n]=(0,s.useState)(""),[l,E]=(0,s.useState)(!1),h=(0,M.A)(),{pathname:y}=(0,k.zy)(),_=(0,g.useShopperCustomersMutation)(g.ShopperCustomersMutations.GetResetPasswordToken),b=function(){var t=(0,r.A)((function*({email:t}){const a={login:t};try{yield _.mutateAsync({body:a}),n(t),E(!l)}catch(t){e.setError("global",{type:"manual",message:t.message})}}));return function(e){return t.apply(this,arguments)}}();return(0,s.useEffect)((()=>{h.sendViewPage(y)}),[]),s.createElement(i.az,{"data-testid":"reset-password-page",bg:"gray.50",py:[8,16]},s.createElement(f.A,{title:"Reset password",description:"Reset customer password"}),s.createElement(c.m,{paddingTop:16,width:["100%","407px"],bg:"white",paddingBottom:14,marginTop:8,marginBottom:8,borderRadius:"base"},l?s.createElement(m.B,{justify:"center",align:"center",spacing:6},s.createElement(x.FQ,{width:"60px",height:"auto"}),s.createElement(d.E,{align:"center",fontSize:"md"},s.createElement(o.A,{defaultMessage:[{type:0,value:"Password Reset"}],id:"reset_password.title.password_reset"})),s.createElement(m.B,{spacing:6,pt:4},s.createElement(d.E,{align:"center",fontSize:"sm"},s.createElement(o.A,{defaultMessage:[{type:0,value:"You will receive an email at "},{type:8,value:"b",children:[{type:1,value:"email"}]},{type:0,value:" with a link to reset your password shortly."}],id:"reset_password.info.receive_email_shortly",values:{email:a,b:e=>s.createElement("b",null,e)}})),s.createElement(u.$,{onClick:()=>t("/login")},s.createElement(o.A,{defaultMessage:[{type:0,value:"Back to Sign In"}],id:"reset_password.button.back_to_sign_in"})))):s.createElement(A,{form:e,submitForm:b,clickSignIn:()=>t("/login")})))};T.getTemplateName=()=>"reset-password",T.propTypes={match:l().object};const z=T}}]);