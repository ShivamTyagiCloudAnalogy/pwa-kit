"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[111],{69646:(e,t,r)=>{r.d(t,{A:()=>R,E:()=>N});var o=r(8805),a=r(49534),i=r(37679),n=r(35906),s=r(98778),l=r(12250),u=r.n(l),c=r(45063),d=r(66170),m=r(73352),p=r(36287),v=r(86400),g=r(78320),y=r(54019),f=r(40133),b=r(64194),h=r(43285),E=r(34302),A=r(25635),I=r(84939),P=r(90025),w=r(55777),k=r(23215),_=r(93459),O=r(70252),D=r(73448),L=r(84479),M=r(74941),F=r(79060);const T=["dynamicImageProps","enableFavourite","imageViewType","isFavourite","onFavouriteToggle","product","selectableAttributeId","badgeDetails"];function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,a.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const z=(0,k.A)(d.K),N=()=>{const e=(0,m.o5)("ProductTile");return s.createElement(p.az,{"data-testid":"sf-product-tile-skeleton"},s.createElement(v.B,{spacing:2},s.createElement(p.az,e.imageWrapper,s.createElement(g.g,(0,n.A)({ratio:1},e.image),s.createElement(y.E,null))),s.createElement(y.E,{width:"80px",height:"20px"}),s.createElement(y.E,{width:{base:"120px",md:"220px"},height:"12px"})))},S=e=>{var t,r,a,l,u;const{dynamicImageProps:d,enableFavourite:v=!1,imageViewType:y=D.a7,isFavourite:k,onFavouriteToggle:C,product:N,selectableAttributeId:S=D.Jr,badgeDetails:R=D.R8}=e,B=(0,i.A)(e,T),{imageGroups:V,productId:x,representedProduct:q,variants:W}=N,$=(0,O.A)(),{currency:G}=(0,F.H2)(),H=(0,s.useRef)(!1),K=(0,m.o5)("ProductTile"),J=W&&q?null==W||null===(t=W.find((e=>e.productId==N.representedProduct.id)))||void 0===t||null===(r=t.variationValues)||void 0===r?void 0:r[S]:void 0,[Y,Z]=(0,s.useState)(J),Q=(0,s.useMemo)((()=>{var e,t;const r=null==N||null===(e=N.variationAttributes)||void 0===e?void 0:e.find((({id:e})=>e===S)),o={[S]:Y},a=(0,M.wP)(V,{viewType:y,variationValues:r?o:{}});return null==a||null===(t=a[0])||void 0===t?void 0:t.images[0]}),[N,S,Y,y]),X=(0,s.useMemo)((()=>(0,L.tE)((0,L.ec)({id:x}),{[S]:Y})),[N,S,Y]),ee=(0,s.useMemo)((()=>(0,M.WM)(N)),[N]),te=N.name??N.productName,re=(0,s.useMemo)((()=>{var e;const t=null==N||null===(e=N.variants)||void 0===e?void 0:e.filter((({variationValues:e})=>e[S]===Y));return j(j({},N),{},{variants:t})}),[N,S,Y]),oe=(0,s.useMemo)((()=>(0,M.mY)(re)),[re]),ae=(0,s.useMemo)((()=>{const e=new Map;return null!=N&&N.representedProduct&&R.forEach((t=>{t.propertyName&&"boolean"==typeof N.representedProduct[t.propertyName]&&!0===N.representedProduct[t.propertyName]&&e.set($.formatMessage(t.label),t.color)})),e}),[N,R]);return s.createElement(p.az,K.container,s.createElement(I.A,(0,n.A)({"data-testid":"product-tile",to:X},K.link,B),s.createElement(p.az,K.imageWrapper,s.createElement(g.g,K.image,s.createElement(E.A,{"data-testid":"product-tile-image",src:`${(null==Q?void 0:Q.disBaseLink)||(null==Q?void 0:Q.link)||(null==N||null===(a=N.image)||void 0===a?void 0:a.disBaseLink)||(null==N||null===(l=N.image)||void 0===l?void 0:l.link)}[?sw={width}&q=60]`,widths:null==d?void 0:d.widths,imageProps:j({alt:"",loading:"lazy"},null==d?void 0:d.imageProps)}))),null==ee||null===(u=ee.filter((({id:e})=>S===e)))||void 0===u?void 0:u.map((({id:e,name:t,values:r})=>s.createElement(w.A,{ariaLabel:t,key:e,value:Y,handleChange:e=>{Z(e)}},null==r?void 0:r.map((({name:e,swatch:t,value:r})=>{const o=t?s.createElement(p.az,{height:"100%",width:"100%",minWidth:"32px",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundColor:e.toLowerCase(),backgroundImage:`url(${(null==t?void 0:t.disBaseLink)||t.link})`}):e;return s.createElement(P.A,{key:r,value:r,name:e,variant:"circle",isFocusable:!0},o)}))))),s.createElement(f.E,K.title,te),s.createElement(c.A,{priceData:oe,currency:G}),U(re)&&s.createElement(_.A,{product:re})),v&&s.createElement(p.az,{onClick:e=>{e.preventDefault()}},s.createElement(z,(0,n.A)({"data-testid":"wishlist-button","aria-label":k?$.formatMessage({id:"product_tile.assistive_msg.remove_from_wishlist",defaultMessage:[{type:0,value:"Remove "},{type:1,value:"product"},{type:0,value:" from wishlist"}]},{product:te}):$.formatMessage({id:"product_tile.assistive_msg.add_to_wishlist",defaultMessage:[{type:0,value:"Add "},{type:1,value:"product"},{type:0,value:" to wishlist"}]},{product:te}),icon:k?s.createElement(A.nM,null):s.createElement(A.C3,null)},K.favIcon,{onClick:(0,o.A)((function*(){H.current||(H.current=!0,yield C(!k),H.current=!1)}))}))),ae.size>0&&s.createElement(b.z,K.badgeGroup,Array.from(ae.entries()).map((([e,t])=>s.createElement(h.E,{key:e,"data-testid":"product-badge",colorScheme:t},e)))))};S.displayName="ProductTile",S.propTypes={product:u().shape({currency:u().string,image:u().shape({alt:u().string,disBaseLink:u().string,link:u().string}),imageGroups:u().array,price:u().number,priceRanges:u().array,tieredPrices:u().array,name:u().string,productName:u().string,productId:u().string,productPromotions:u().array,representedProduct:u().object,hitType:u().string,variationAttributes:u().array,variants:u().array,type:u().shape({set:u().bool,bundle:u().bool,item:u().bool})}),enableFavourite:u().bool,isFavourite:u().bool,onFavouriteToggle:u().func,imageViewType:u().string,selectableAttributeId:u().string,dynamicImageProps:u().object,badgeDetails:u().array};const R=S,U=e=>e.variants?Boolean(e.variants.find((e=>e.productPromotions))):Boolean(e.productPromotions)},99906:(e,t,r)=>{r.d(t,{A:()=>I});var o=r(35906),a=r(8805),i=r(37679),n=r(98778),s=r(12250),l=r.n(s),u=r(70252),c=r(14893),d=r(1367),m=r(65376),p=r(60309),v=r(55735),g=r(54851),y=r(34638),f=r(7711),b=r(73448),h=r(54007);const E=["zone","recommender","products","title","shouldFetch"],A=e=>{let{zone:t,recommender:r,products:s,title:l,shouldFetch:A}=e,I=(0,i.A)(e,E);const{isLoading:P,recommendations:w,getZoneRecommendations:k,getRecommendations:_,sendClickReco:O,sendViewReco:D}=(0,m.A)(),{data:L}=(0,p.J)(),{customerId:M}=L,{data:F}=(0,g.T)(),T=(0,h.useShopperCustomersMutation)("createCustomerProductListItem"),C=(0,h.useShopperCustomersMutation)("deleteCustomerProductListItem"),j=(0,y.d)(),z=(0,f.A)(),{formatMessage:N}=(0,u.A)(),S=(0,n.useRef)(),R=(0,v.A)(S,{useOnce:!0}),[U,B]=(0,n.useState)(s);if((0,n.useEffect)((()=>{("function"!=typeof A||A())&&(t?k(t,U):r&&_(r,U))}),[t,r,U]),(0,n.useEffect)((()=>{Array.isArray(s)&&(s.length===(null==U?void 0:U.length)&&s.every(((e,t)=>e===(null==U?void 0:U[t])))||B(s))}),[s]),(0,n.useEffect)((()=>{R&&null!=w&&w.recs&&D({recommenderName:w.recommenderName,__recoUUID:w.recoUUID},w.recs.map((e=>({id:e.id}))))}),[R,w]),!P&&(!w||w.length<1))return null;const V=function(){var e=(0,a.A)((function*(e){try{if(!F||!M)return;yield T.mutateAsync({parameters:{listId:F.id,customerId:M},body:{quantity:1,productId:e.productId,public:!1,priority:1,type:"product"}}),j({title:N(b.FD,{quantity:1}),status:"success",action:n.createElement(c.$,{variant:"link",onClick:()=>z("/account/wishlist")},N(b.D$))})}catch{j({title:N(b.gS),status:"error"})}}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.A)((function*(e){try{var t;const r=null==F||null===(t=F.customerProductListItems)||void 0===t?void 0:t.find((t=>t.productId===e.productId));if(!r||!F||!M)return;yield C.mutateAsync({parameters:{customerId:M,itemId:r.id,listId:F.id}}),j({title:N(b.gq),status:"success",id:e.productId})}catch{j({title:N(b.gS),status:"error"})}}));return function(t){return e.apply(this,arguments)}}();return n.createElement(d.A,(0,o.A)({ref:S,title:l||(null==w?void 0:w.displayMessage),products:w.recs,isLoading:P,productTileProps:e=>{var t;return{onClick:()=>{O({recommenderName:w.recommenderName,__recoUUID:w.recoUUID},e)},enableFavourite:!0,isFavourite:null==F||null===(t=F.customerProductListItems)||void 0===t?void 0:t.some((t=>t.productId===(null==e?void 0:e.productId))),onFavouriteToggle:t=>(t?V:x)(e)}}},I))};A.propTypes={title:l().any,zone:l().string,recommender:l().string,products:l().arrayOf(l().object),shouldFetch:l().func};const I=A}}]);